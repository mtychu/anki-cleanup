<section
  class="default-ink yuji-syuku tc flex flex-column justify-center min-h-100 lh-copy pa3"
>
  <p class="ma0 dib mr-auto ml-auto grow-custom append-play-btn-text">
    {{audio}}
  </p>

  <section class="">
    <h1 class="ma0 f1 lh-title">{{term}}</h1>
    <p class="ma0 f2 lh-title">{{reading}}</p>
    <p class="ma0 f3">{{translation}}</p>
    <p class="ma0 f3">{{transliteration}}</p>
    <p class="ma0 f4 pb2">{{Tags}}</p>
    <!-- TODO: fix ink effect w/ before and after img elements, make image appear full color on hover -->

    <div class="relative measure dib lh-0" style="overflow: hidden">
      <div class="absolute left-0 top-0 z-999 show-on-hover lh-0">
        {{picture}}
      </div>
      <div
        class="dib measure decolorize multiply lh-0"
        style="overflow: hidden"
      >
        <div class="ink-and-paint lh-0" style="">{{picture}}</div>
      </div>
    </div>
  </section>
</section>

<div class="off-screen">
  <svg class="svgcat">
    <filter
      id="ink-and-paint"
      color-interpolation-filters="sRGB"
      x="0%"
      y="0%"
      width="100%"
      height="100%"
      filterUnits="objectBoundingBox"
    >
      <feGaussianBlur
        stdDeviation="1"
        edgeMode="duplicate"
        in="SourceGraphic"
        result="bg_blur"
      />

      <!-- https://fecolormatrix.com/ - colour matrix editor-->

      <feColorMatrix
        type="matrix"
        values=" 1.600 -0.089  0.000  0.000  0.132 
                                 0.000  1.600 -0.089  0.000  0.132 
                                 0.000  0.647  1.600 -0.089  0.132 
                                 0.000  0.000  0.647  1.000  0.132"
        in="bg_blur"
        result="bg_color_corrected"
      />

      <feColorMatrix
        type="matrix"
        values="0.33 0.59 0.11 0 0 0.33 0.59 0.11 0 0 0.33 0.59 0.11 0 0 0 0 0 1 0"
        in="SourceGraphic"
        result="grayscale"
      />

      <feConvolveMatrix
        order="5 5"
        bias="1"
        divisor="10"
        kernelUnitLength="1"
        kernelMatrix="-5 -8 -10 -8 -5 -4 -10 -20 -10 -4 0 0 0 0 0 4 10 20 10 4 5 8 10 8 5"
        edgeMode="duplicate"
        in="grayscale"
        resullt="sobel_90"
      />
      <feColorMatrix
        type="matrix"
        values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"
        in="sobel_90"
        result="sobel_90_inverted"
      />

      <feConvolveMatrix
        order="5 5"
        bias="1"
        divisor="10"
        kernelUnitLength="1"
        kernelMatrix="5 8 10 8 5 4 10 20 10 4 0 0 0 0 0 -4 -10 -20 -10 -4 -5 -8 -10 -8 -5"
        edgeMode="duplicate"
        in="grayscale"
        resullt="sobel_270"
      />
      <feColorMatrix
        type="matrix"
        values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"
        in="sobel_270"
        result="sobel_270_inverted"
      />

      <feConvolveMatrix
        order="5 5"
        bias="1"
        divisor="10"
        kernelUnitLength="1"
        kernelMatrix="5 4 0 -4 -5 8 10 0 -10 -8 10 20 0 -20 -10 8 10 0 -10 -8 5 4 0 -4 -5"
        edgeMode="duplicate"
        in="grayscale"
        resullt="sobel_0"
      />
      <feColorMatrix
        type="matrix"
        values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"
        in="sobel_0"
        result="sobel_0_inverted"
      />

      <feConvolveMatrix
        order="5 5"
        bias="1"
        divisor="10"
        kernelUnitLength="1"
        kernelMatrix="-5 -4 0 4 5 -8 -10 0 10 8 -10 -20 0 20 10 -8 -10 0 10 8 -5 -4 0 4 5"
        edgeMode="duplicate"
        in="grayscale"
        resullt="sobel_180"
      />
      <feColorMatrix
        type="matrix"
        values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"
        in="sobel_180"
        result="sobel_180_inverted"
      />

      <feBlend
        in="sobel_90_inverted"
        in2="sobel_270_inverted"
        mode="lighten"
        result="edges_h"
      />
      <feBlend
        in="sobel_0_inverted"
        in2="sobel_180_inverted"
        mode="lighten"
        result="edges_v"
      />
      <feBlend in="edges_h" in2="edges_v" mode="lighten" result="edges" />

      <feColorMatrix
        type="matrix"
        values="-0.7 0 0 0 1 0 -0.7 0 0 1 0 0 -0.7 0 1 0 0 0 1 0"
        in="edges"
        result="edges_inverted"
      />

      <feComponentTransfer in="edges_inverted" result="edges_cleaned">
        <feFuncR type="table" tableValues="0 0 0 0 0 0 0 1 1 1" />
        <feFuncG type="table" tableValues="0 0 0 0 0 0 0 1 1 1" />
        <feFuncB type="table" tableValues="0 0 0 0 0 0 0 1 1 1" />
      </feComponentTransfer>

      <feBlend
        in="edges_cleaned"
        in2="bg_color_corrected"
        mode="multiply"
        result="out"
      />
    </filter>
  </svg>
</div>
